{"version":3,"file":"component---src-pages-pg-essays-js-89a9a95349472f9bdefa.js","mappings":"4LAuCA,MAnCmBA,IAWZ,IAXa,QAClBC,EAAO,aACPC,EAAa,GAAE,UACfC,EAAU,GAAE,cACZC,EAAa,QACbC,EAAO,UACPC,EAAU,GAAE,UACZC,EAAU,GAAE,iBACZC,EAAiB,GAAE,GACnBC,EAAG,GAAE,SACLC,GACDV,EACC,OACEW,EAAAA,cAAA,OAAKJ,UAAWA,EAAWE,GAAIA,GAC7BE,EAAAA,cAAA,OAAKJ,UAAW,GAAGK,EAAAA,EAAUC,KAAKC,yCAChCH,EAAAA,cAAA,OAAKJ,UAAW,GAAGJ,KACjBQ,EAAAA,cAAA,MAAIJ,UAAW,GAAGL,KACfD,GAEFS,GAEFL,GAAWD,EACVO,EAAAA,cAAA,OAAKJ,UAAW,GAAGD,KAChBD,EACCM,EAAAA,cAACI,EAAAA,EAAI,CAACC,KAAMX,EAASE,UAAWC,IAEhCJ,GAGH,MAED,C,iFCiEV,UA9Fca,IACZ,MAAM,EAACC,EAAQ,EAACC,IAAcC,EAAAA,EAAAA,UAAS,MAMjCC,EAAM,mDAHM,IAAIC,gBAAgBL,EAAMM,SAASC,QAC7BC,IAAI,gBA6D5B,OAzDAC,EAAAA,EAAAA,YAAU,KACeC,WACrB,IAAK,IAADC,EACF,MAAMC,QAAiBC,MAAMT,GAC7B,IAAKQ,EAASE,GACZ,MAAM,IAAIC,MAAM,+BAElB,MAAMC,QAAaJ,EAASI,OAGtBC,GADS,IAAIC,WACAC,gBAAgBH,EAAM,aAEzC,IAAII,EAC+B,QAD1BT,EAAGM,EACTI,qBAAqB,SAAS,UAAE,IAAAV,OAAA,EADvBA,EAERU,qBAAqB,SAAS,GAC/BA,qBAAqB,QAAQ,GAAGC,UAGnC,MAAMC,EAAQH,EAAMI,MAAM,8BACtBD,GACFA,EAAME,SAASC,IACb,MAAMC,EAAOD,EAAKF,MAAM,0BAA0B,GAClDJ,EAAQA,EAAMQ,QACZD,EACA,oBAAoBA,EAAKE,MAAM,KAAK,KACrC,IAIDT,EACFlB,EAAWkB,GAGTH,EACGI,qBAAqB,SAAS,GAC9BA,qBAAqB,SAAS,GAEjCnB,EACEe,EACGI,qBAAqB,SAAS,GAC9BA,qBAAqB,SAAS,GAAGC,WAE7BL,EAAII,qBAAqB,SAAS,GAC3CnB,EAAWe,EAAII,qBAAqB,SAAS,GAAGC,WAEhDpB,EAAWe,EAAIK,UAGrB,CAAE,MAAOQ,GACPC,QAAQD,MAAM,eAAgBA,GAC9B5B,EAAW,sCACb,GAGF8B,EAAgB,GACf,CAAC5B,IAGFV,EAAAA,cAACuC,EAAAA,EAAM,CAACC,YAAY,IAClBxC,EAAAA,cAACyC,EAAAA,EAAG,CACFC,MAAM,wBACNC,YACE,0CAGJ3C,EAAAA,cAAA,OACE4C,MAAM,eACNC,MAAO,CACLC,UAAW,UAGb9C,EAAAA,cAAC+C,EAAAA,EAAU,CAACvD,UAAU,yBACtBQ,EAAAA,cAAA,OAAKJ,UAAU,oBACbI,EAAAA,cAAA,OAAKJ,UAAU,eACbI,EAAAA,cAAA,KACEJ,UAAU,wCACVoD,wBAAyB,CAAEC,OAAQ1C,QAKpC,C","sources":["webpack://priyanshujain.dev/./src/components/home/SectionBox.js","webpack://priyanshujain.dev/./src/pages/pg/essays.js"],"sourcesContent":["import React from \"react\";\nimport Icon from \"../Icon\";\nimport styleVars from \"../../styles/style-vars\";\n\nconst SectionBox = ({\n  heading, \n  headingClass=\"\", \n  bodyClass=\"\", \n  sideComponent,\n  sideImg, \n  sideClass=\"\", \n  className=\"\",\n  sideImgClassName=\"\",\n  id=\"\",\n  children\n}) => {\n  return (\n    <div className={className} id={id}>\n      <div className={`${styleVars.page.xl} grid-12 gutter-row-20 gutter-36-ns`}>\n        <div className={`${bodyClass}`}>\n          <h1 className={`${headingClass}`}>\n            {heading}\n          </h1>\n          {children}\n        </div>\n        {sideImg || sideComponent ? (\n          <div className={`${sideClass}`}>\n            {sideImg ? (\n              <Icon name={sideImg} className={sideImgClassName}/>\n            ) : (\n              sideComponent\n            )}\n          </div>\n        ): null}\n      </div>\n    </div>\n  );\n}\n\nexport default SectionBox;\n","import React, { useEffect, useState } from \"react\";\nimport Layout from \"../../components/layout/index\";\nimport SEO from \"../../components/seo\";\nimport { SectionBox } from \"../../components/home\";\nimport Icon from \"../../components/Icon\";\n\nconst Page = (props) => {\n  const [content, setContent] = useState(null);\n\n  // get essay query params\n  const urlParams = new URLSearchParams(props.location.search);\n  const essay = urlParams.get(\"essay\");\n\n  const url = `https://api.pjay.in/?url=https://paulgraham.com/${essay}.html`;\n\n  useEffect(() => {\n    const fetchAndRender = async () => {\n      try {\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        const text = await response.text();\n\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(text, \"text/html\");\n\n        var table = doc\n          .getElementsByTagName(\"table\")[0]\n          ?.getElementsByTagName(\"table\")[0]\n          .getElementsByTagName(\"font\")[0].innerHTML;\n\n        // if any of the a tags have a href matching *.html  then replace it with /pg/essays?essay=*\n        const aTags = table.match(/<a href=\".*.html\">.*<\\/a>/g);\n        if (aTags) {\n          aTags.forEach((aTag) => {\n            const href = aTag.match(/<a href=\"(.*)\">.*<\\/a>/)[1];\n            table = table.replace(\n              href,\n              `/pg/essays?essay=${href.split(\".\")[0]}`\n            );\n          });\n        }\n\n        if (table) {\n          setContent(table);\n        } else {\n          if (\n            doc\n              .getElementsByTagName(\"table\")[0]\n              .getElementsByTagName(\"table\")[1]\n          ) {\n            setContent(\n              doc\n                .getElementsByTagName(\"table\")[0]\n                .getElementsByTagName(\"table\")[1].innerHTML\n            );\n          } else if (doc.getElementsByTagName(\"table\")[0]) {\n            setContent(doc.getElementsByTagName(\"table\")[0].innerHTML);\n          } else {\n            setContent(doc.innerHTML);\n          }\n        }\n      } catch (error) {\n        console.error(\"Fetch error:\", error);\n        setContent(\"Failed to fetch and render content.\");\n      }\n    };\n\n    fetchAndRender();\n  }, [url]);\n\n  return (\n    <Layout headerClass=\"\">\n      <SEO\n        title=\"Essays by Paul Graham\"\n        description={\n          `A collection of essays by Paul Graham`\n        }\n      />\n      <div\n        class=\"main-content\"\n        style={{\n          minHeight: \"100vh\",\n        }}\n      >\n        <SectionBox bodyClass=\"col-12 mw-100 center\" />\n        <div className=\" pt0 pb5 pb20-ns\">\n          <div className=\"mw-l center\">\n            <p\n              className=\"ma0 pa0 pl5 pr5 mt4 f4 f3-ns sig-grey\"\n              dangerouslySetInnerHTML={{ __html: content }}\n            />\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Page;\n"],"names":["_ref","heading","headingClass","bodyClass","sideComponent","sideImg","sideClass","className","sideImgClassName","id","children","React","styleVars","page","xl","Icon","name","props","content","setContent","useState","url","URLSearchParams","location","search","get","useEffect","async","_doc$getElementsByTag","response","fetch","ok","Error","text","doc","DOMParser","parseFromString","table","getElementsByTagName","innerHTML","aTags","match","forEach","aTag","href","replace","split","error","console","fetchAndRender","Layout","headerClass","SEO","title","description","class","style","minHeight","SectionBox","dangerouslySetInnerHTML","__html"],"sourceRoot":""}